<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Slot Machine</title>
  </head>
  <style>
    :root {
      --color-background-Button: #1e88e5;
      --color-background-Button-Hover: #1565c0;
      --color-border-Button-Hover: #90caf9;
      --color--border-Button: #64b5f6;
      --color--border-ContainerGame: #123a72;
      --color--background-Body: #020c1b;
      --color--background-ContainerGame: #081c3a;
      --color-text: #e6eeff;
      --color-Box-Shadow: rgba(30, 136, 229, 0.25);
    }
    * {
      caret-color: transparent;
    }
    body {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      height: 100dvh;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--color--background-Body);
      font-family: "Orbitron", sans-serif;
    }
    .containerGame {
      width: fit-content;
      display: flex;
      border: 2px solid var(--color--border-ContainerGame);
      border-radius: 10px;
      box-shadow: 0 0 18px var(--color-Box-Shadow);
      background-color: var(--color--background-ContainerGame);
      padding: 10px;
      gap: 20px;
    }
    .containerScreen {
      width: 300px;
      display: flex;
      flex-direction: column;
      gap: 30px;
    }
    .machine {
      display: flex;
      height: 100px;
    }
    .inputScreen {
      flex: 1;
    }
    .inputScreen img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    .result {
      display: flex;
      justify-content: center;
      border: 1px solid var(--color--border-ContainerGame);
      border-radius: 30px;
      padding: 7px;
      box-shadow: 0 0 2px var(--color-Box-Shadow);
    }
    .result h2 {
      margin: 0;
      color: var(--color-text);
    }
    .buttonStart {
      height: 50px;
      width: 100px;
      font-size: 18px;
      background-color: var(--color-background-Button);
      color: var(--color-text);
      border: 2px solid var(--color--border-Button);
      font-family: "Orbitron", sans-serif;
    }
    .buttonStart:hover {
      background-color: var(--color-background-Button-Hover);
      border-color: var(--color-border-Button-Hover);
      color: var(--color-text);
    }
    .buttonStart:active {
      transform: scale(0.97);
    }
    .buttonStart:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      box-shadow: none;
    }
  </style>

  <body>
    <div class="containerGame">
      <div class="containerScreen">
        <div class="machine">
          <button class="inputScreen">
            <img class="screen1" src="./image/pear-icon.svg" />
          </button>
          <button class="inputScreen">
            <img class="screen2" src="./image/diamond-color-icon.svg" />
          </button>
          <button class="inputScreen">
            <img class="screen3" src="./image/chili-icon.svg" />
          </button>
        </div>
        <div class="result">
          <h2 class="score">Loading...</h2>
        </div>
      </div>
      <button class="buttonStart">Play</button>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
      //Math.floor(Math.random() * 10);
      const urlS = [
        "./image/blueberry-icon.svg",
        "./image/chili-icon.svg",
        "./image/diamond-color-icon.svg",
        "./image/fresh-apple-icon.svg",
        "./image/pear-icon.svg",
      ];

      const buttonStart = document.querySelector(".buttonStart");
      const score = document.querySelector(".score");
      const screen1 = document.querySelector(".screen1");
      const screen2 = document.querySelector(".screen2");
      const screen3 = document.querySelector(".screen3");

      const spin = (screen, duration) => {
        return new Promise((resolve) => {
          let number;
          const interval = setInterval(() => {
            number = Math.floor(Math.random() * urlS.length);
            screen.src = urlS[number];
          }, 100);

          setTimeout(() => {
            clearInterval(interval);
            resolve(number);
          }, duration);
        });
      };

      buttonStart.addEventListener("click", async () => {
        buttonStart.disabled = true;
        score.textContent = "Loading...";
        const value1 = await spin(screen1, 2000);
        const value2 = await spin(screen2, 2500);
        const value3 = await spin(screen3, 3000);
        if (value1 === value2 && value2 === value3) {
          score.textContent = "ðŸŽŠ You Win";
          confetti({
            particleCount: 200,
            spread: 120,
            startVelocity: 40,
            origin: { y: 0.6 },
          });
        } else score.textContent = "ðŸ˜µ You Lose";

        buttonStart.disabled = false;
      });
    </script>
  </body>
</html>
